udf moo(?x):=?y if mooDef(?x,?y).
udf rr(?x):=?y if rrDef(?x,?y).
udf rr(a):=p.
udf bar(?x):=moo(?x) if t(?x).
udf bar1(?x):=moo(?x) if t(?x).
udf foo(?x):=bar(?x) if q(?x).
udf foo1(?x):=bar1(?x) if q(?x).
udf foo(?x):=rr(?x) if r(?x).
udf foo(p):=aa.
udf foo(q):=cc.

mooDef(a,b).
mooDef(b,c).
mooDef(c,d).
mooDef(d,e).
mooDef(e,f).
mooDef(f,g).

q(a).
q(b).
q(c).
q(d).
q(f).

r(a).
r(c).
r(d).

t(a).
t(d).
t(f).
t(e).

f(b).
f(d).
f(g).


%test1 :- foo(?x)=bar(?x), writeln(?x)@_plg, fail.
%test1 :- true.
%test2 :- bar(?x)=moo(?x), writeln(?x)@_plg, fail.
%test2 :- true.
%test3 :- moo(?x)=foo(?x), writeln(?x)@_plg, fail.
%test3 :- true.

%pretest :- %test1, %test2, %test3.

%test:- 
	tell(temp)@_plg,
	%pretest,
	told@_plg.
