udf foo(1):=2.
udf foo(2):=3 if true.

// this should give an error because it is loaded into main,
// but test_func_facts.flr is loaded into foomod1.
?- [+test_func_facts_aux].

%test1 :-
	?y=foo(?x),
	flora_write_goal_substitute_vars(?x)@_plg(flrdecode),
	%nl@_io,
	flora_write_goal_substitute_vars(?y)@_plg(flrdecode),
	%nl@_io,
	fail.
%test1 :- true.

%test2 :- %auxtest.

%pretest :- %test1, %test2.

%test :- tell(temp)@_plg,
	 %pretest,
	 told@_plg.
