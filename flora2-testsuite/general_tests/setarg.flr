
{p,q}(a,g(f({b,c}))).

{Mary,Joe}:{Student,Worker}.

{Student,Worker}::something({Person,Busy}).

qqq({?X,?Y}) :- {p,q}(?,?(f({?X,?Y}))).

{a,m}[{ppp,qqq} -> {1,{2,3},4}].

abc(?X) :- ?X:something({Person,Busy}).

cde({?X,?Y},?Z) :- ?X[{?Y,qqq} ->?Z].

?- insert{something({Person,Busy})::foo({zzz,qqq})}.
?- insertrule{www(?X,?Y,?Z) :- ?X:foo({?Y,?Z})}.

%tst1 :- write('test1: ')@_plg,
	?R=bagof{?X|qqq(?X)},
	writeln(?R)@_plg.

%tst2 :- write('test2: ')@_plg,
	?R=bagof{?X|abc(?X)},
	writeln(?R)@_plg.

%tst3 :- write('test3: ')@_plg,
	?R=setof{?X|cde(?Y,?Z), ?X=?Y+?Z},
	writeln(?R)@_plg.

%tst4 :- write('test4: ')@_plg,
	?R=bagof{?V|www(?X,?Y,?Z), ?V=?X+?Y+?Z},
	writeln(?R)@_plg.

%tst5 :- write('test5: ')@_plg,
	deleteall{something({?,Busy})::foo({zzz,?})},
	refresh{www(?,?,?)},
	refresh{?:foo({?,?})},
	?R=bagof{?V|www(?X,?Y,?Z), ?V=?X+?Y+?Z},
	writeln(?R)@_plg.

%pretest :- %tst1, %tst2, %tst3, %tst4, %tst5.

%test :- tell(temp)@_plg(),
	%pretest,
	told@_plg().
