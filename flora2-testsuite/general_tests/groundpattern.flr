:- setsemantics{tabling(incremental)}.
groundPattern([], []).
groundPattern([?F|?R],[True |?RP]) :-
	nonvar(?F),
	groundPattern(?R,?RP).
groundPattern([?F|?R],[False|?RP]) :- 
	var(?F),
	groundPattern(?R,?RP).

%tst1 :- ?R = bagof{?PAT|true{groundPattern([], ?PAT)}}, writeln(test1 = ?R)@_plg .
%tst2 :- ?R = bagof{?PAT|true{groundPattern([(1)], ?PAT)}}, writeln(test2 = ?R)@_plg .
%tst3 :- ?R = bagof{?PAT|true{groundPattern([?_X], ?PAT)}}, writeln(test3 = ?R)@_plg .
%tst4 :- ?R = bagof{?PAT|true{groundPattern([(1), (2)], ?PAT)}}, writeln(test4 = ?R)@_plg .
%tst5 :- ?R = bagof{?PAT|true{groundPattern([(1), ?_X], ?PAT)}}, writeln(test5 = ?R)@_plg .
%tst6 :- ?R = bagof{?PAT|true{groundPattern([?_X, (2)], ?PAT)}}, writeln(test6 = ?R)@_plg .
%tst7 :- ?R = bagof{?PAT|true{groundPattern([?_X, ?_Y], ?PAT)}}, writeln(test7 = ?R)@_plg .

%tst8 :- ?R = bagof{?PAT|true{groundPattern([(1), (2)], ?PAT)}}, writeln(test8 = ?R)@_plg .
%tst9 :- ?R = bagof{?PAT|true{groundPattern([(1), ?_X], ?PAT)}}, writeln(test9 = ?R)@_plg .

%pretest :- %tst1, %tst2, %tst3, %tst4, %tst5, %tst6, %tst7,
            %tst8, %tst9.

%test :- tell(temp)@_plg(), 
	%pretest,
	Method[%mustDefine(on)]@_sys,
	%pretest,
	Method[%mustDefine(off)]@_sys,
	told@_plg().
