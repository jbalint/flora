/************************************************************************
  File: includes/flrtrailer.flh
  Author(s): Michael Kifer

  Copyright (C) by
       The Research Foundation of the State University of New York, 1999-2013.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
       http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.


  This file is automatically included by the FLORA-2 compiler.
**************************************************************************/

%% Loadable trailer includes headers and other stuff that includes
%% various macro definitions. When a trailer is included directly then
%% macro definitions would be included prior to the trailer. In this
%% case LOADABLETRAILER will be undefined and flrheader.flh and
%% friends won't be included.

:-(compiler_options([spec_off])).

#mode standard Prolog

#ifdef LOADABLETRAILER

#include "flrheader.flh"
#include "flora_porting.flh"

/*
   flrutils.P also includes FLHEADER2 at the end of the trailer.
   This is needed in order to always have static definitions for
   tabling available. Otherwise, XSB dumps core when dynamic
   ?- table definitions are executed.
   For instance, if we execute:
       semantics{tabling(subsumptive)}.
*/
#define TABLING_CONNECTIVE  ?-

#include "flora_tabling_methods.flh"
#include "flrtable.flh"
#include "flrhilogtable.flh"
#include "flrdyndeclare.flh"

#include "flrauxtables.flh"


#include "flrtrailerregistry.flh"

%% include list of tabled predicates
#if defined(FLORA_FLT_FILENAME)
#include FLORA_FLT_FILENAME
#endif

%% END of LOADABLETRAILER
#endif

%% Common part to all trailers
#include "flrcommon.flh"

%% Common part of the trailer with inheritance
#ifdef INHERITANCEflogic
#include "flrcommon_inh.flh"
#endif


%% No equality
#ifdef EQUALITYnone
#ifdef INHERITANCEflogic
#include "flrnoeqltrailer_inh.flh"
#endif

#ifdef INHERITANCEnone
#include "flrnoeqltrailer.flh"
#endif

#include "flrprednoeql.flh"
#endif


%% Basic equality
#ifdef EQUALITYbasic
#ifdef INHERITANCEflogic
#include "flreqltrailer_inh.flh"
#endif

#ifdef INHERITANCEnone
#include "flreqltrailer.flh"
#endif

#include "flrpredeql.flh"
#endif


%% F-logic equality - DEPRECATED 
#ifdef EQUALITYflogic
#ifdef INHERITANCEflogic
#include "flreqltrailer_inh.flh"
#endif

#ifdef INHERITANCEnone
#include "flreqltrailer.flh"
#endif

#include "flrscalareql.flh"
#include "flrpredeql.flh"
#endif


%% Custom trailer file
#ifdef CUSTOMTRAILER
#mode save
#mode nostring "\""
#include "CUSTOMTRAILER"
#mode restore
#endif


#ifdef CUSTOMnone
#endif

