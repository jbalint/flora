/* File:      flrsynonym.P  -- Synonyms for some FLORA-2 operators and builtins
**
** Author(s): Michael Kifer
**
** Contact:   kifer@cs.stonybrook.edu
**
** Copyright (C) by
**      The Research Foundation of the State University of New York, 1999-2008.
**
** All rights reserved.
**
** For information about licensing terms, please see
** http://silk.projects.semwebcentral.org/flora2-license.html
**
**
*/



:- compiler_options([xpp_on]).
#include "flora_terms.flh"

:- export flora_op_synonym/2,
	flora_builtin_synonym/2,
	flora_special_builtin_synonym/2.

base_op(FL_COMMA).         %% ,
base_op(FL_SEMICOLON).     %% ;
base_op(FL_MVDARROW).      %% ->
base_op(FL_INMVDARROW).    %% *->
base_op(FL_MVDSIGARROW).   %% =>
base_op(FL_INMVDSIGARR).   %% *=>
base_op(FL_ISA).           %% :
base_op(FL_SUB).           %% ::

base_op(FL_UNIVNOTEQ).     %% \=
base_op(FL_NOTEQ).         %% \==
base_op(FL_NOTUNIVEQFORM). %% \~
base_op(FL_PREFIXDEF).     %% iriprefix


%% Operator synonyms - handled by the composer
:- table op_synonym/2.
op_synonym(FL_AND,FL_COMMA).
op_synonym(FL_OR,FL_SEMICOLON).
op_synonym(FL_HASVALUE,FL_MVDARROW).
op_synonym(FL_HASDEFAULTVALUE,FL_INMVDARROW).
op_synonym(FL_HASTYPE,FL_INMVDSIGARR).
op_synonym(FL_ISAWORD,FL_ISA).
op_synonym(FL_MEMBEROF,FL_ISA).
op_synonym(FL_SUBCLASSOF,FL_SUB).

op_synonym(FL_C_UNEQUAL,FL_UNIVNOTEQ).
op_synonym(FL_C_NOTSAME,FL_NOTEQ).
op_synonym(FL_C_NOTUNIVEQFORM,FL_NOTUNIVEQFORM).
op_synonym(FL_PREFIXDEF_SYNONYM,FL_PREFIXDEF).


op_synonym(X,Y) :- op_synonym(Y,X).
op_synonym(X,Y) :- op_synonym(X,Z), op_synonym(Z,Y).

flora_op_synonym(NewOP,OP) :- op_synonym(NewOP,OP), base_op(OP), \+ base_op(NewOP).


%% Builtin synonyms - handled by the lexer
builtin_synonym('_plg', FL_PLIB) :- !.
builtin_synonym('_prlg', FL_PLIB) :- !.
builtin_synonym('_plgall', FL_PLIBALL) :- !.
builtin_synonym('_prlgall', FL_PLIBALL) :- !.
builtin_synonym('_sys', FLSYSMODSYSTEM) :- !.
builtin_synonym('_db', FLSYSMODDATABASE) :- !.
builtin_synonym('_typeCheck', FLSYSMODTYPECHECK) :- !.
builtin_synonym('_eval', FLSYSMODEVAL) :- !.
builtin_synonym('_baseType', FLSYSMODBASETYPE) :- !.

builtin_synonym('_real', FL_DOUBLE) :- !.
builtin_synonym('_short', FL_LONG) :- !.

/*
builtin_synonym('_dt', FL_DATETIME) :- !.
builtin_synonym('_t',  FL_TIME) :- !.
builtin_synonym('_d',  FL_DATE) :- !.
builtin_synonym('_du',  FL_DURATION) :- !.
builtin_synonym('_int',  FL_LONG) :- !.
*/

flora_builtin_synonym(M,Canonic) :-
	%% atom
	builtin_synonym(M,Canonic),
	!.
flora_builtin_synonym(M,Canonic) :-
	%% char list
	is_charlist(M), % important or _prolog etc. will bomb on atom_codes
	atom_codes(Matm,M),
	builtin_synonym(Matm,CanonicAtm),
	atom_codes(CanonicAtm,Canonic),
	!.
flora_builtin_synonym(M,M).


%% Builtins of the form builtin{...}
special_builtin_synonym(btinsert, FL_BTINSERT) :- !.
special_builtin_synonym(btinsertall, FL_BTINSERTALL) :- !.
special_builtin_synonym(btdelete, FL_BTDELETE) :- !.
special_builtin_synonym(btdeleteall, FL_BTDELETEALL) :- !.
special_builtin_synonym(bterase, FL_BTERASE) :- !.
special_builtin_synonym(bteraseall, FL_BTERASEALL) :- !.
special_builtin_synonym(tinsert, FL_BTINSERT) :- !.
special_builtin_synonym(tinsertall, FL_BTINSERTALL) :- !.
special_builtin_synonym(tdelete, FL_BTDELETE) :- !.
special_builtin_synonym(tdeleteall, FL_BTDELETEALL) :- !.
special_builtin_synonym(terase, FL_BTERASE) :- !.
special_builtin_synonym(teraseall, FL_BTERASEALL) :- !.

special_builtin_synonym(minimum, FL_MIN) :- !.
special_builtin_synonym(maximum, FL_MAX) :- !.
special_builtin_synonym(average, FL_AVG) :- !.
special_builtin_synonym(prolog2hilog, FL_P2H) :- !.

flora_special_builtin_synonym(M,Canonic) :-
	%% atom
	special_builtin_synonym(M,Canonic),
	!.
flora_special_builtin_synonym(M,M).

