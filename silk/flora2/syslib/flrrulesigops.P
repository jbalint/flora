/* File:      flrrulesigops.P
**
** Author(s): Michael Kifer
**
** Contact:   kifer@cs.stonybrook.edu
**
** Copyright (C) by
**      The Research Foundation of the State University of New York, 2008, 2009;
**      and Vulcan, Inc., 2009.
**
** All rights reserved.
**
** For information about licensing terms, please see
** http://silk.projects.semwebcentral.org/flora2-license.html
**
**
*/

:- compiler_options([xpp_on]).
#include "flora_terms.flh"

:- import
	show_rule_signature/9,
	matching_rule_signature/6,
	rule_signature_member/3
   from flrcanon.

:- import
	get_tag_descriptor_info/4
   from flrdescriptor_support.


%% should we return rule ids instead?
FLLIBTAGPRIMITIVE(Tag,HeadList) :-
	HeadList = [Head],
	get_tag_descriptor_info(RuleId,_Mod,Tag,VarsTerm),
	matching_rule_signature(RuleId,VarsTerm,_RulePrefx,Head,_Body,_RuleSig).
	%% We now retrieve strict rules also, since they may have tags.
	%%rule_signature_member(defeatcondition,_RuleSig,DefeatCond),
	%%DefeatCond \== NULL.

%% Can be used to obtain all known tags of defeasible rules.
%% FL_RULE_TAG(-Tag,+Mod)
FL_RULE_TAG(Tag,Mod) :-
	get_tag_descriptor_info(RuleId,Mod,Tag,VarsTerm),
	show_rule_signature(RuleId,VarsTerm,_RulePrefx,Mod,_Hd,_Body,DefeatCond,_RuleList,_BridgeRule),
	DefeatCond \== NULL.
