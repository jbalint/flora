function foo(?x):=?y if pred(?x,?y)@bar.
p(b).
p(g).
g(?x):-p(foo(?x)).
//g2(?x):-p(?newvar1), pred(?x,?newvar1)@bar.

pretest1 :- _compileadd(test_func_modulebar),[+test_func_modulebar>>bar].
test1:- g(?x),writeln(?x)@_plg.
test2:- pred(a,foo(a))@bar,writeln('yes')@_plg,!.
test2:- writeln('no')@_plg.
test3:- pred(f,foo(f))@bar,writeln('yes')@_plg,!.
test3:- writeln('no')@_plg.

%test :-
	tell(temp)@_plg,
	pretest1,
	test1,
	test2,
	test3,
	told@_plg.
